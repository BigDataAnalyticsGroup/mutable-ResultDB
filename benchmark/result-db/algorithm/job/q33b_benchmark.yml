description: Join-Order Benchmark q33b.
suite: result-db
benchmark: job
name: q33b
readonly: true
chart:
    x:
        scale: linear
        type: O
        label: JOB Queries
    y:
        scale: linear
        type: Q
        label: 'Execution time [ms]'
    # Defaults: scale is "linear", type is "Q", label is "X" or "Y"
data:
    'company_name':
        file: 'benchmark/job/data/company_name.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'name': 'CHAR 100 NOT NULL'
            'country_code': 'CHAR 6'
            'imdb_id': 'INT'
            'name_pcode_nf': 'CHAR 5'
            'name_pcode_sf': 'CHAR 5'
            'md5sum': 'CHAR 32'
    'company_name':
        file: 'benchmark/job/data/company_name.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'name': 'CHAR 100 NOT NULL'
            'country_code': 'CHAR 6'
            'imdb_id': 'INT'
            'name_pcode_nf': 'CHAR 5'
            'name_pcode_sf': 'CHAR 5'
            'md5sum': 'CHAR 32'
    'info_type':
        file: 'benchmark/job/data/info_type.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'info': 'CHAR 32 NOT NULL'
    'info_type':
        file: 'benchmark/job/data/info_type.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'info': 'CHAR 32 NOT NULL'
    'kind_type':
        file: 'benchmark/job/data/kind_type.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'kind': 'CHAR 15 NOT NULL'
    'kind_type':
        file: 'benchmark/job/data/kind_type.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'kind': 'CHAR 15 NOT NULL'
    'link_type':
        file: 'benchmark/job/data/link_type.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'link': 'CHAR 32 NOT NULL'
    'movie_companies':
        file: 'benchmark/job/data/movie_companies.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'movie_id': 'INT NOT NULL'
            'company_id': 'INT NOT NULL'
            'company_type_id': 'INT NOT NULL'
            'note': 'CHAR 100'
    'movie_companies':
        file: 'benchmark/job/data/movie_companies.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'movie_id': 'INT NOT NULL'
            'company_id': 'INT NOT NULL'
            'company_type_id': 'INT NOT NULL'
            'note': 'CHAR 100'
    'movie_info_idx':
        file: 'benchmark/job/data/movie_info_idx.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'movie_id': 'INT NOT NULL'
            'info_type_id': 'INT NOT NULL'
            'info': 'CHAR 3 NOT NULL'
            'note': 'CHAR 1'
    'movie_info_idx':
        file: 'benchmark/job/data/movie_info_idx.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'movie_id': 'INT NOT NULL'
            'info_type_id': 'INT NOT NULL'
            'info': 'CHAR 3 NOT NULL'
            'note': 'CHAR 1'
    'movie_link':
        file: 'benchmark/job/data/movie_link.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'movie_id': 'INT NOT NULL'
            'linked_movie_id': 'INT NOT NULL'
            'link_type_id': 'INT NOT NULL'
    'title':
        file: 'benchmark/job/data/title.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'title': 'CHAR 100 NOT NULL'
            'imdb_index': 'CHAR 5'
            'kind_id': 'INT NOT NULL'
            'production_year': 'INT'
            'imdb_id': 'INT'
            'phonetic_code': 'CHAR 5'
            'episode_of_id': 'INT'
            'season_nr': 'INT'
            'episode_nr': 'INT'
            'series_years': 'CHAR 9'
            'md5sum': 'CHAR 32'
    'title':
        file: 'benchmark/job/data/title.csv'
        format: 'csv'
        delimiter: ','
        header: 0
        attributes:
            'id': 'INT NOT NULL'
            'title': 'CHAR 100 NOT NULL'
            'imdb_index': 'CHAR 5'
            'kind_id': 'INT NOT NULL'
            'production_year': 'INT'
            'imdb_id': 'INT'
            'phonetic_code': 'CHAR 5'
            'episode_of_id': 'INT'
            'season_nr': 'INT'
            'episode_nr': 'INT'
            'series_years': 'CHAR 9'
            'md5sum': 'CHAR 32'


systems:
    mutable:
        args: >-
          --backend WasmV8
          --no-simd
          --cardinality-estimator Injected
          --use-cardinality-file benchmark/result-db/algorithm/job/q33b_cardinalities.json
          --insist-no-rehashing
        configurations:                                   # Different experiment configurations.
            'WasmV8, resultdb':
                args: --result-db
                pattern: '^Execute machine code:.*'
            'WasmV8, decompose':
                args: --decompose
                pattern: '^Execute machine code:.*'
            'WasmV8, single-table':
                args: ''
                pattern: '^Execute machine code:.*'
        cases:
            0: 'SELECT cn1.name, cn2.name, mi_idx1.info, mi_idx2.info, t1.title, t2.title FROM company_name AS cn1, company_name AS cn2, info_type AS it1, info_type AS it2, kind_type AS kt1, kind_type AS kt2, link_type AS lt, movie_companies AS mc1, movie_companies AS mc2, movie_info_idx AS mi_idx1, movie_info_idx AS mi_idx2, movie_link AS ml, title AS t1, title AS t2 WHERE cn1.country_code = "[nl]" AND it1.info = "rating" AND it2.info = "rating" AND (kt1.kind = "tv series") AND (kt2.kind = "tv series") AND lt.link LIKE "%follow%" AND mi_idx2.info < "3.0" AND t2.production_year = 2007 AND lt.id = ml.link_type_id AND t1.id = ml.movie_id AND t2.id = ml.linked_movie_id AND it1.id = mi_idx1.info_type_id AND t1.id = mi_idx1.movie_id AND kt1.id = t1.kind_id AND cn1.id = mc1.company_id AND t1.id = mc1.movie_id AND ml.movie_id = mi_idx1.movie_id AND ml.movie_id = mc1.movie_id AND mi_idx1.movie_id = mc1.movie_id AND it2.id = mi_idx2.info_type_id AND t2.id = mi_idx2.movie_id AND kt2.id = t2.kind_id AND cn2.id = mc2.company_id AND t2.id = mc2.movie_id AND ml.linked_movie_id = mi_idx2.movie_id AND ml.linked_movie_id = mc2.movie_id AND mi_idx2.movie_id = mc2.movie_id;'
